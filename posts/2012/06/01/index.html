<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Shaocheng.Li"><meta name=description content="Qt Embedded 直接依赖 Framebuffer，无需 X-Window。所以要开启 Linux 系统的 Framebuffer 。开启方法是通过 BootLoader 向内核传递参数：
 对于 grub，在 grub.conf 文件的kernel 命令后面添加 vga=0x311 fb:on 。 对于 lilo，在 lilo.conf 文件中添加 vga=0x311。0x311 表示分辨率为 640*480，16dpp。  编译安装 首先下载 Qt/E-4.4.0 的源码，然后解压在 root 目录：
cd /root tar -xvjf qt-embedded-linux-opensource-src-4.4.0.tar.bz2 cd qt-embedded-linux-opensource-src-4.4.0  源码中包含了文档、例程。这些会占用很多空间和编译时间，如果不需要的话就修改 configure ，把它去掉：
QT_DEFAULT_BUILD_PARTS=&amp;quot;libs tools examples demos doc&amp;quot; 改为 QT_DEFAULT_BUILD_PARTS=&amp;quot;libs tools&amp;quot;  通过 configure 的选项可以关闭很多不需要的模块，用 ./configure -help 查看详情。
针对嵌入式版本，还可以用 -no-feature-&amp;lt;feature&amp;gt; 关闭相应的特性，默认情况下会编译全部的特性。可用的 feature 在 src/corelib/global/qfeatures.txt 文件中有完整描述。但是这个方法不方便，通常是通过 -qconfig 参数指定一个配置文件，在 src/corelib/global/ 目录下有几个典型的配置文件："><meta name=keywords content><meta name=robots content="noodp"><meta name=theme-color content="#252627"><link rel=canonical href=https://shaocheng.li/posts/2012/06/01/><title>在 Redhat9 文本系统上安装 Qt/E 4.4.0 :: Shaocheng.Li — Hello Friends</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=https://shaocheng.li/main.min.e9b3dfcc5ffe9d55eb281ecaf47cf6179d26eec497e087299934d581c987aa0b.css><link rel=stylesheet type=text/css href=https://shaocheng.li/css/custom.css><link rel=apple-touch-icon sizes=180x180 href=https://shaocheng.li/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://shaocheng.li/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://shaocheng.li/favicon-16x16.png><link rel=manifest href=https://shaocheng.li/site.webmanifest><link rel=mask-icon href=https://shaocheng.li/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=https://shaocheng.li/favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="在 Redhat9 文本系统上安装 Qt/E 4.4.0"><meta itemprop=description content="Qt Embedded 直接依赖 Framebuffer，无需 X-Window。所以要开启 Linux 系统的 Framebuffer 。开启方法是通过 BootLoader 向内核传递参数：
 对于 grub，在 grub.conf 文件的kernel 命令后面添加 vga=0x311 fb:on 。 对于 lilo，在 lilo.conf 文件中添加 vga=0x311。0x311 表示分辨率为 640*480，16dpp。  编译安装 首先下载 Qt/E-4.4.0 的源码，然后解压在 root 目录：
cd /root tar -xvjf qt-embedded-linux-opensource-src-4.4.0.tar.bz2 cd qt-embedded-linux-opensource-src-4.4.0  源码中包含了文档、例程。这些会占用很多空间和编译时间，如果不需要的话就修改 configure ，把它去掉：
QT_DEFAULT_BUILD_PARTS=&#34;libs tools examples demos doc&#34; 改为 QT_DEFAULT_BUILD_PARTS=&#34;libs tools&#34;  通过 configure 的选项可以关闭很多不需要的模块，用 ./configure -help 查看详情。
针对嵌入式版本，还可以用 -no-feature-&lt;feature&gt; 关闭相应的特性，默认情况下会编译全部的特性。可用的 feature 在 src/corelib/global/qfeatures.txt 文件中有完整描述。但是这个方法不方便，通常是通过 -qconfig 参数指定一个配置文件，在 src/corelib/global/ 目录下有几个典型的配置文件："><meta itemprop=datePublished content="2012-06-01T08:00:00&#43;08:00"><meta itemprop=dateModified content="2012-06-01T08:00:00&#43;08:00"><meta itemprop=wordCount content="213"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shaocheng.li"><meta name=twitter:title content="在 Redhat9 文本系统上安装 Qt/E 4.4.0"><meta name=twitter:description content="Qt Embedded 直接依赖 Framebuffer，无需 X-Window。所以要开启 Linux 系统的 Framebuffer 。开启方法是通过 BootLoader 向内核传递参数：
 对于 grub，在 grub.conf 文件的kernel 命令后面添加 vga=0x311 fb:on 。 对于 lilo，在 lilo.conf 文件中添加 vga=0x311。0x311 表示分辨率为 640*480，16dpp。  编译安装 首先下载 Qt/E-4.4.0 的源码，然后解压在 root 目录：
cd /root tar -xvjf qt-embedded-linux-opensource-src-4.4.0.tar.bz2 cd qt-embedded-linux-opensource-src-4.4.0  源码中包含了文档、例程。这些会占用很多空间和编译时间，如果不需要的话就修改 configure ，把它去掉：
QT_DEFAULT_BUILD_PARTS=&#34;libs tools examples demos doc&#34; 改为 QT_DEFAULT_BUILD_PARTS=&#34;libs tools&#34;  通过 configure 的选项可以关闭很多不需要的模块，用 ./configure -help 查看详情。
针对嵌入式版本，还可以用 -no-feature-&lt;feature&gt; 关闭相应的特性，默认情况下会编译全部的特性。可用的 feature 在 src/corelib/global/qfeatures.txt 文件中有完整描述。但是这个方法不方便，通常是通过 -qconfig 参数指定一个配置文件，在 src/corelib/global/ 目录下有几个典型的配置文件："><meta property="article:published_time" content="2012-06-01 08:00:00 &#43;0800 &#43;0800"></head><body><div class=container><header class=header><span class=header__inner><a href=https://shaocheng.li/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ cd /home/</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://shaocheng.li/about/>About</a></li><li><a href=https://shaocheng.li/posts/>Posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>One minute</p></div><article><h1 class=post-title><a href=https://shaocheng.li/posts/2012/06/01/>在 Redhat9 文本系统上安装 Qt/E 4.4.0</a></h1><div class=post-content><p>Qt Embedded 直接依赖 Framebuffer，无需 X-Window。所以要开启 Linux 系统的 Framebuffer 。开启方法是通过 BootLoader 向内核传递参数：</p><ul><li>对于 grub，在 grub.conf 文件的kernel 命令后面添加 vga=0x311 fb:on 。</li><li>对于 lilo，在 lilo.conf 文件中添加 vga=0x311。0x311 表示分辨率为 640*480，16dpp。</li></ul><h2 id=编译安装>编译安装</h2><p>首先下载 Qt/E-4.4.0 的源码，然后解压在 root 目录：</p><pre><code>cd /root
tar -xvjf qt-embedded-linux-opensource-src-4.4.0.tar.bz2
cd qt-embedded-linux-opensource-src-4.4.0
</code></pre><p>源码中包含了文档、例程。这些会占用很多空间和编译时间，如果不需要的话就修改 configure ，把它去掉：</p><pre><code>QT_DEFAULT_BUILD_PARTS=&quot;libs tools examples demos doc&quot; 

改为

QT_DEFAULT_BUILD_PARTS=&quot;libs tools&quot;
</code></pre><p>通过 configure 的选项可以关闭很多不需要的模块，用 ./configure -help 查看详情。</p><p>针对嵌入式版本，还可以用 -no-feature-&lt;feature&gt; 关闭相应的特性，默认情况下会编译全部的特性。可用的 feature 在 src/corelib/global/qfeatures.txt 文件中有完整描述。但是这个方法不方便，通常是通过 -qconfig 参数指定一个配置文件，在 src/corelib/global/ 目录下有几个典型的配置文件：</p><pre><code>qconfig-large.h  #包含了大多数特性。
qconfig-small.h  #关闭了很多特性。
qconfig-minimal.h   #最小配置，几乎关闭了所有特性。
</code></pre><p>可以手动编辑修改配置。但是各种特性之间的依赖很复杂，所有Qt提供了一个图形工具 qconfig 来帮助生成配置。这个工具需要编译，安装 Qt/E 后再介绍。</p><p>执行：</p><pre><code>./configure -prefix /usr/qt -release -no-largefile -no-qt3support -no-xmlpatterns -no-phonon -no-svg -no-webkit  -no-mmx -no-3dnow -no-sse -no-sse2 -no-gif -no-libtiff -no-libmng -qt-libpng -qt-libjpeg -no-openssl -no-nis -no-cups -no-iconv -no-opengl -no-dbus -qt-freetype -depths 16 -embedded x86 -qt-decoration-default -qt-gfx-linuxfb -qt-kbd-tty -qt-kbd-usb -qt-mouse-pc -qt-mouse-bus -no-glib -qconfig src/corelib/global/qconfig-small.h
make
make install
</code></pre><p>编译工程需要几个小时，所有文件都会被安装到 /usr/qt/ 目录下。现在配置环境变量：
在 /etc/profile 文件中添加：</p><pre><code>PATH=$PATH:/usr/qt/bin
</code></pre><p>在 /etc/ld.so.conf 文件中添加：</p><pre><code>/usr/qt/lib
</code></pre><p>然后执行 ldconf -v</p><p>重启系统后，Qt/E 就可以使用了。</p><h2 id=测试>测试</h2><p>demo.cpp</p><pre><code>#include &lt;QApplication&gt;  
#include &lt;QPushButton&gt;  
#include &lt;QFont&gt;  
#include &lt;QTextCodec&gt;  
int main(int argc, char *argv[])  
{  
    QApplication app(argc, argv);  
    QTextCodec *codec = QTextCodec::codecForName(&quot;GB18030&quot;);    
    QTextCodec::setCodecForLocale(codec);    
    QTextCodec::setCodecForCStrings(codec);    
    QTextCodec::setCodecForTr(codec);    
    QPushButton hello(&quot;Hello 世界!&quot;);  
    hello.show();  
    return app.exec();  
}  
</code></pre><p>编译：</p><pre><code>qmake -project
qmake
make
</code></pre><p>编译生成了 demo 程序，运行：</p><pre><code>./demo -qws -fn wenquanyi
</code></pre><p><img src=https://shaocheng.li/images/2012-06-01/2012-06-01_1.PNG alt></p><h2 id=用qconfig工具配置qconfig-local-h文件>用qconfig工具配置qconfig-local.h文件</h2><p>进入qconfig的源码目录编译生成 qconfig ：</p><pre><code>cd  tools/qconfig/
qmake 
make
</code></pre><p>执行qconfig：</p><pre><code>./qconfig -qws
</code></pre><p>首次打开时可能出现如下界面，需要导入 feature.txt 文件：</p><p><img src=https://shaocheng.li/images/2012-06-01/2012-06-01_2.PNG alt></p><p>选择 src/corelib/global/feature.txt 文件，然后点击 Open ，就会导入所有可配置的特性：</p><p><img src=https://shaocheng.li/images/2012-06-01/2012-06-01_3.PNG alt></p><p>在左侧的树状列表中选择需要编译的特性，然后通过 File 菜单的 Save As 保存为qconfig-local.h文件即可。
也可以通过 File -&gt; Open 打开已有的配置文件，例如 qconfig-small.h，进行修改。</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>213 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2012-06-01 00:00 &#43;0000</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h></span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://shaocheng.li/posts/2012/09/09/><span class=button__icon>←</span>
<span class=button__text>用 Octopress 在 github 上部署博客</span></a></span>
<span class="button next"><a href=https://shaocheng.li/posts/2012/04/29/><span class=button__text>Vim/Cscope 教程</span>
<span class=button__icon>→</span></a></span></div></div><div id=comments class=thin><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"shaocheng-li"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://shaocheng.li>Shaocheng.Li</a></span>
<span><a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></span>
<span><a href=https://shaocheng.li/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>rhazdon</a></span></div></div></footer></div><script type=text/javascript src=https://shaocheng.li/bundle.min.2d5469329143160ae2456a69c3c76dc2d0a3b212b46afe291a51bd68650ed6f8697e001dab54f1c272c77ce08092a8c55e5bb4314e0ee334aab4b927ec896638.js integrity="sha512-LVRpMpFDFgriRWppw8dtwtCjshK0av4pGlG9aGUO1vhpfgAdq1TxwnLHfOCAkqjFXlu0MU4O4zSqtLkn7IlmOA=="></script></body></html>