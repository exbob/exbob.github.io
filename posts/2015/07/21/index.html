<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Shaocheng.Li ">
<meta name="description" content="1.什么是 JSON JSON 介绍：http://json.org/json-zh.html
JSON 是 JavaScript 对象表示法语法的子集，是一种轻量级的数据交换格式。一个 JSON 对象是 “名称:值” 对的无序集合，用花括号包含，“名称:值” 对包含一个字段名称（在双引号中），然后跟一个冒号，最后是值，例如：
{ &amp;quot;name&amp;quot;: &amp;quot;sample_app&amp;quot;, &amp;quot;cmd&amp;quot;: [&amp;quot;python&amp;quot;, &amp;quot;$MOD/sample.py&amp;quot;, &amp;quot;-c&amp;quot;, &amp;quot;$MOD/init.cfg&amp;quot;], &amp;quot;depends&amp;quot;: [&amp;quot;modbus_USBV0&amp;quot;, &amp;quot;cloud_client&amp;quot;, &amp;quot;defaultdb&amp;quot;], &amp;quot;version&amp;quot;: &amp;quot;1.0.0&amp;quot; }  这里的值可以是：
 数字（整数或浮点数） 字符串（在双引号中） 逻辑值（true 或 false） 数组（在方括号中） 对象（在花括号中） null  2.json 库 Python 提供了 json 库（https://docs.python.org/2/library/json.html），可以完成对 JSON 对象的编解码（encoding and decoding），就是 JSON 对象转换为 Python 的数据结构，或者逆过程：
   JSON Python     Object dict   string string   number int,long,float   array list,tuple   true True   false False   null None    基本操作 dumps 方法可以将 Python 数据转换为 JSON 格式的字符串，然后返回，例如：" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<link rel="canonical" href="https://shaocheng.li/posts/2015/07/21/" />


    <title>
        
            Python 对 JSON 的处理 :: Shaocheng.Li  — Hello Friends
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://shaocheng.li/main.min.73f55a8d452be4a71b2960620b80252cf69abd84d63fe7501abf0a39b1a70a78.css">


    
        <link rel="stylesheet" type="text/css" href="https://shaocheng.li/css/custom.css">
    



    <link rel="apple-touch-icon" sizes="180x180" href="https://shaocheng.li/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://shaocheng.li/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://shaocheng.li/favicon-16x16.png">
    <link rel="manifest" href="https://shaocheng.li/site.webmanifest">
    <link rel="mask-icon" href="https://shaocheng.li/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="https://shaocheng.li/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">

<meta itemprop="name" content="Python 对 JSON 的处理">
<meta itemprop="description" content="1.什么是 JSON JSON 介绍：http://json.org/json-zh.html
JSON 是 JavaScript 对象表示法语法的子集，是一种轻量级的数据交换格式。一个 JSON 对象是 “名称:值” 对的无序集合，用花括号包含，“名称:值” 对包含一个字段名称（在双引号中），然后跟一个冒号，最后是值，例如：
{ &quot;name&quot;: &quot;sample_app&quot;, &quot;cmd&quot;: [&quot;python&quot;, &quot;$MOD/sample.py&quot;, &quot;-c&quot;, &quot;$MOD/init.cfg&quot;], &quot;depends&quot;: [&quot;modbus_USBV0&quot;, &quot;cloud_client&quot;, &quot;defaultdb&quot;], &quot;version&quot;: &quot;1.0.0&quot; }  这里的值可以是：
 数字（整数或浮点数） 字符串（在双引号中） 逻辑值（true 或 false） 数组（在方括号中） 对象（在花括号中） null  2.json 库 Python 提供了 json 库（https://docs.python.org/2/library/json.html），可以完成对 JSON 对象的编解码（encoding and decoding），就是 JSON 对象转换为 Python 的数据结构，或者逆过程：
   JSON Python     Object dict   string string   number int,long,float   array list,tuple   true True   false False   null None    基本操作 dumps 方法可以将 Python 数据转换为 JSON 格式的字符串，然后返回，例如：">


<meta itemprop="datePublished" content="2015-07-21T08:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2015-07-21T08:00:00&#43;08:00" />
<meta itemprop="wordCount" content="286">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://shaocheng.li"/>

<meta name="twitter:title" content="Python 对 JSON 的处理"/>
<meta name="twitter:description" content="1.什么是 JSON JSON 介绍：http://json.org/json-zh.html
JSON 是 JavaScript 对象表示法语法的子集，是一种轻量级的数据交换格式。一个 JSON 对象是 “名称:值” 对的无序集合，用花括号包含，“名称:值” 对包含一个字段名称（在双引号中），然后跟一个冒号，最后是值，例如：
{ &quot;name&quot;: &quot;sample_app&quot;, &quot;cmd&quot;: [&quot;python&quot;, &quot;$MOD/sample.py&quot;, &quot;-c&quot;, &quot;$MOD/init.cfg&quot;], &quot;depends&quot;: [&quot;modbus_USBV0&quot;, &quot;cloud_client&quot;, &quot;defaultdb&quot;], &quot;version&quot;: &quot;1.0.0&quot; }  这里的值可以是：
 数字（整数或浮点数） 字符串（在双引号中） 逻辑值（true 或 false） 数组（在方括号中） 对象（在花括号中） null  2.json 库 Python 提供了 json 库（https://docs.python.org/2/library/json.html），可以完成对 JSON 对象的编解码（encoding and decoding），就是 JSON 对象转换为 Python 的数据结构，或者逆过程：
   JSON Python     Object dict   string string   number int,long,float   array list,tuple   true True   false False   null None    基本操作 dumps 方法可以将 Python 数据转换为 JSON 格式的字符串，然后返回，例如："/>





    <meta property="article:published_time" content="2015-07-21 08:00:00 &#43;0800 CST" />








    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://shaocheng.li/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=""></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://shaocheng.li/about/">About</a></li><li><a href="https://shaocheng.li/posts/">Posts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>2 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://shaocheng.li/posts/2015/07/21/">Python 对 JSON 的处理</a>
            </h1>

            

            <div class="post-content">
                

<h2 id="1-什么是-json">1.什么是 JSON</h2>

<p>JSON 介绍：<a href="http://json.org/json-zh.html" target="_blank">http://json.org/json-zh.html</a></p>

<p>JSON 是 JavaScript 对象表示法语法的子集，是一种轻量级的数据交换格式。一个 JSON 对象是 “名称:值” 对的无序集合，用花括号包含，“名称:值” 对包含一个字段名称（在双引号中），然后跟一个冒号，最后是值，例如：</p>

<pre><code>{
    &quot;name&quot;: &quot;sample_app&quot;,
    &quot;cmd&quot;: [&quot;python&quot;, &quot;$MOD/sample.py&quot;, &quot;-c&quot;, &quot;$MOD/init.cfg&quot;],
    &quot;depends&quot;: [&quot;modbus_USBV0&quot;, &quot;cloud_client&quot;, &quot;defaultdb&quot;],
    &quot;version&quot;: &quot;1.0.0&quot;
}
</code></pre>

<p>这里的值可以是：</p>

<ul>
<li>数字（整数或浮点数）</li>
<li>字符串（在双引号中）</li>
<li>逻辑值（true 或 false）</li>
<li>数组（在方括号中）</li>
<li>对象（在花括号中）</li>
<li>null</li>
</ul>

<h2 id="2-json-库">2.json 库</h2>

<p>Python 提供了 json 库（<a href="https://docs.python.org/2/library/json.html" target="_blank">https://docs.python.org/2/library/json.html</a>），可以完成对 JSON 对象的编解码（encoding and decoding），就是 JSON 对象转换为 Python 的数据结构，或者逆过程：</p>

<table>
<thead>
<tr>
<th>JSON</th>
<th>Python</th>
</tr>
</thead>

<tbody>
<tr>
<td>Object</td>
<td>dict</td>
</tr>

<tr>
<td>string</td>
<td>string</td>
</tr>

<tr>
<td>number</td>
<td>int,long,float</td>
</tr>

<tr>
<td>array</td>
<td>list,tuple</td>
</tr>

<tr>
<td>true</td>
<td>True</td>
</tr>

<tr>
<td>false</td>
<td>False</td>
</tr>

<tr>
<td>null</td>
<td>None</td>
</tr>
</tbody>
</table>

<h3 id="基本操作">基本操作</h3>

<p>dumps 方法可以将 Python 数据转换为 JSON 格式的字符串，然后返回，例如：</p>

<pre><code>&gt;&gt;&gt; import json
&gt;&gt;&gt; obj={ 'name':'Bob', 'data':(1,3) }
&gt;&gt;&gt; encodedjson=json.dumps(obj)
&gt;&gt;&gt; print obj
{'data': (1, 3), 'name': 'Bob'}
&gt;&gt;&gt; print encodedjson
{&quot;data&quot;: [1, 3], &quot;name&quot;: &quot;Bob&quot;}
&gt;&gt;&gt; print type(encodedjson)
&lt;type 'str'&gt;
</code></pre>

<p>从输出结果看，元组转换为了数组，字符串改成了双引号。</p>

<p>loads 方法可以将 JSON 格式的字符串转换为 Python 的 dict 结构，例如：</p>

<pre><code>&gt;&gt;&gt; import json
&gt;&gt;&gt; jsoncode='{ &quot;name&quot;:&quot;Bob&quot;,&quot;data&quot;:[1,2,3] }'
&gt;&gt;&gt; obj=json.loads(jsoncode)
&gt;&gt;&gt; print obj
{u'data': [1, 2, 3], u'name': u'Bob'}
&gt;&gt;&gt; print type(obj)
&lt;type 'dict'&gt;
&gt;&gt;&gt; print obj['name']
Bob
</code></pre>

<p>转换后的字符串前都带有 u 字符，表示这个字符串是 Unicode 编码，并不会影响 dict 的使用。</p>

<h3 id="encoders-and-decoders">Encoders and Decoders</h3>

<p>json 模块提供了两个子类 JSONDecoder 和 JSONEncoder ，负责 JSON 的解码和编码。</p>

<p>JSONDecoder 是解码器，提供了两种方法：</p>

<ul>
<li>decode(s) ，将 JSON 结构的字符串 s 转换为 Python 结构，并返回。</li>
<li>raw_decode(s) ， 同样是解码，但是会返回两个值，第一个是解码后的 Python 结构，第二个值表示解码结束时，走到了 s 的哪个位置，这个方法适用于 s 的末尾有无效数据的情况。</li>
</ul>

<p>例如：</p>

<pre><code>&gt;&gt;&gt; import json
&gt;&gt;&gt; file=open(&quot;package.cfg&quot;)
&gt;&gt;&gt; text=file.read()
&gt;&gt;&gt; print text
{
        &quot;name&quot;: &quot;sample_app&quot;,
        &quot;cmd&quot;: [&quot;python&quot;, &quot;$MOD/sample.py&quot;, &quot;-c&quot;, &quot;$MOD/init.cfg&quot;],
        &quot;depends&quot;: [&quot;modbus_USBV0&quot;, &quot;cloud_client&quot;, &quot;defaultdb&quot;],
        &quot;version&quot;: &quot;1.0.0&quot;
}

hello

&gt;&gt;&gt; obj,raw=json.JSONDecoder().raw_decode(text)
&gt;&gt;&gt; print obj   
{u'depends': [u'modbus_USBV0', u'cloud_client', u'defaultdb'], u'cmd': [u'python', u'$MOD/sample.py', u'-c', u'$MOD/init.cfg'], u'name': u'sample_app', u'version': u'1.0.0'}
&gt;&gt;&gt; print raw
166
&gt;&gt;&gt; obj=json.JSONDecoder().decode(text)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/usr/lib/python2.7/json/decoder.py&quot;, line 369, in decode
    raise ValueError(errmsg(&quot;Extra data&quot;, s, end, len(s)))
ValueError: Extra data: line 8 column 1 - line 9 column 1 (char 168 - 174)
</code></pre>

<p>package.cfg 的末尾有无效的字符 hello ，用 raw_decode() 可以忽略并解码，用 decode() 就会报错。</p>

<p>JSONEncoder 是编码器，提供了 encode(o) 方法，可以将 Python 结构 o 转换为 JSON 结构的字符串，并返回。</p>

            </div>
        </article>

        <hr />

        <div class="post-info">

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>286 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2015-07-21 08:00 &#43;0800</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://shaocheng.li/posts/2015/07/27/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Python 的多线程</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://shaocheng.li/posts/2015/07/01/">
                                <span class="button__text">Linux 系统中的时间</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        

        
          <div id="comments" class="thin">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "shaocheng-li" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="https://shaocheng.li">Shaocheng.Li</a></span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span> <a href="https://shaocheng.li/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">rhazdon</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="https://shaocheng.li/bundle.min.2d5469329143160ae2456a69c3c76dc2d0a3b212b46afe291a51bd68650ed6f8697e001dab54f1c272c77ce08092a8c55e5bb4314e0ee334aab4b927ec896638.js" integrity="sha512-LVRpMpFDFgriRWppw8dtwtCjshK0av4pGlG9aGUO1vhpfgAdq1TxwnLHfOCAkqjFXlu0MU4O4zSqtLkn7IlmOA=="></script>



    </body>
</html>
