---
title: 晴天钟 Documentation
date: 2016-04-06T08:00:00+08:00
draft: false
toc:
comments: true
---


## 1. 简介

晴天钟是一系列天气预测产品的总称，它们主要提取于美国国家大气海洋局/气候环境预测局(NOAA/NCEP)的“全球预测系统”(Global Forecast System, GFS)数值模式。由叶泉志开发，目前由中国科学院上海天文台中国天文科普网提供硬件及网络支持。

## 2. 使用

域名是 <http://7timer.org> ，IP 访问 <http://202.127.24.18/> 。域名不太稳定，通常用 IP 访问 。由于它使用的是 Google 地图，所有要开启翻墙代理，还要选择英文，否则就看不到地图了。

我通常用它来查看天文用途的天气预报。在地图上单击选点，然后选择 ASTRO ：

![](/images/2016-04-06/2016-04-06_1.jpg)

就可以看到天文用途的三天天气预报：

![](/images/2016-04-06/2016-04-06_2.jpg)

各种图标的含义：

![](/images/2016-04-06/2016-04-06_3.jpg)

## 3. API

有两种 API ：图表 API 和程序 API 。

### 图表 API

调用图表 API 将会返回类似晴天钟网站所见的预报图表，API 是一个 URL ，返回的图表为PNG格式，直接用浏览器访问如下 URL 即可：

> http://202.127.24.18/v4/bin/astro.php?lon=113.17&lat=23.09&ac=0&lang=en&unit=metric&output=internal&tzshift=0

可以通过参数来控制返回结果，这些参数的含义：

* lon, lat - 指定地点的经纬度，必须是浮点数。
* ac – 高度改正，只对天文用途预报有效。可取 0（默认）、2 或 7。只适用于图表 API。
* lang – 语言，en 表示英文，zh-CN 表示中文。只适用于图表 API 。
* unit – 公制或英制，metric/imperial 。对程序 API 无效。
* output – 可设定为 internal（图表输出）、xml 或 json（程序 API ）。
* tzshift – 时区微调，可取 0、1 或 -1。对程序 API 无效。
* product – 为程序 API 选择产品，应为 astro（天文用途）, civil, civillight, meteo 或 two 。

### 程序 API

程序 API 若被成功调用，将会返回一系列数据。这些数据使用 XML 或 JSON 格式封装，其地址分别为：

> XML: http://202.127.24.18v4/bin/api.pl?lon=118.093&lat=24.468&product=astro&output=xml
> JSON: http://202.127.24.18/v4/bin/api.pl?lon=118.093&lat=24.468&product=astro&output=json

product 设为 astro 时，会返回天文用途的数据，返回值的含义：    

| 变量 | 返回值 | 定义
| --- | --- | ---
| 云量 | 1 | 0%-6%
|     | 2 | 6%-19%
|     | 3 | 19%-31%
|     | 4 | 31%-44%
|     | 5 | 44%-56%
|     | 6 | 56%-69%
|     | 7 | 69%-81%
|     | 8 | 81%-94%
|     | 9 | 94%-100%
| 抬升指数 | -10	 | 小于-7
|     | -6 | -7至-5
|     | -4 | -5至-3
|     | -1 | -3至0
|     | 2 | 0至4
|     | 6 | 4至8
|     | 10 | 8至11
|     | 15 | 大于11
| 2米气温 | -76至60 | -76摄氏度至+60摄氏度
| 视宁度	| 1	| <0.5"
| 	| 2	| 0.5"-0.75"
| 	| 3	| 0.75"-1"
| 	| 4	| 1"-1.25"
| 	| 5	| 1.25"-1.5"
| 	| 6	| 1.5"-2"
| 	| 7	| 2"-2.5"
| 	| 8	| 	>2.5"
| 透明度	| 1 | <0.3
| 	| 2	| 	0.3-0.4
| 	| 3	| 	0.4-0.5
| 	| 4	| 	0.5-0.6
| 	| 5	| 	0.6-0.7
| 	| 6	| 	0.7-0.85
| 	| 7	| 	0.85-1
| 	| 8	| 	>1
| 2米相对湿度	 | -4 | 0%-5%
| 	| -3	| 5%-10%
| 	| -2	| 	10%-15%
| 	| -1	| 	15%-20%
| 	| 0		| 20%-25%
| 	| 1		| 25%-30%
| 	| 2		| 30%-35%
| 	| 3		| 35%-40%
| 	| 4		| 40%-45%
| 	| 5		| 45%-50%
| 	| 6		| 50%-55%
| 	| 7		| 55%-60%
| 	| 8		| 60%-65%
| 	| 9		| 65%-70%
| 	| 10	| 	70%-75%
| 	| 11	| 	75%-80%
| 	| 12	| 	80%-85%
| 	| 13	| 	85%-90%
| 	| 14	| 	90%-95%
| 	| 15	| 	95%-99%
| 	| 16	| 	100%
| 10米风速	| 1	| 低于0.3米/秒（无风）
| 	| 2		| 0.3-3.4米/秒（1-2级）
| 	| 3		| 3.4-8.0米/秒（3-4级）
| 	| 4		| 8.0-10.8米/秒（5级）
| 	| 5		| 10.8-17.2米/秒（6-7级）
| 	| 6		| 17.2-24.5米/秒（8-9级）
| 	| 7		| 24.5-32.6米/秒（10-11级）
| 	| 8		| 超过32.6米/秒（12级或以上）
| 降水类型	| snow（雪）、rain（雨）、none（无）
| 无效值	| -9999 | 无效值
